(this.webpackJsonppart2=this.webpackJsonppart2||[]).push([[0],{18:function(e,n,t){},43:function(e,n,t){"use strict";t.r(n);t(18);var r=t(3),a=t(17),c=t.n(a),u=t(2),s=t.n(u),i=t(4),o=t(8),d=t(5),b=t(6),f=t.n(b),l="/api/persons",j={getAll:function(){var e=Object(i.a)(s.a.mark((function e(){var n,t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=f.a.get(l),e.next=3,n;case 3:return t=e.sent,e.abrupt("return",t.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),addPerson:function(){var e=Object(i.a)(s.a.mark((function e(n){var t,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.a.post(l,n),e.next=3,t;case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),updateNumber:function(){var e=Object(i.a)(s.a.mark((function e(n,t){var r,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=f.a.put("".concat(l,"/").concat(n),t),e.next=3,r;case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),deletePerson:function(){var e=Object(i.a)(s.a.mark((function e(n){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.delete("".concat(l,"/").concat(n));case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()},p=t(0),m=function(e){var n=e.searchName,t=e.onSearch;return Object(p.jsx)("div",{children:Object(p.jsxs)("span",{children:["search contact:"," ",Object(p.jsx)("input",{type:"text",value:n,onChange:t})]})})},h=function(e){var n=e.submit,t=e.newName,r=e.handleNameChange,a=e.newNumber,c=e.handleNumberChange;return Object(p.jsxs)("form",{onSubmit:n,children:[Object(p.jsxs)("div",{children:["name:"," ",Object(p.jsx)("input",{type:"text",value:t,onChange:r,required:!0})]}),Object(p.jsxs)("div",{children:["number:"," ",Object(p.jsx)("input",{type:"text",value:a,onChange:c,required:!0})]}),Object(p.jsx)("div",{children:Object(p.jsx)("button",{type:"submit",children:"add"})})]})},O=function(e){var n=e.persons,t=e.onDelete;return Object(p.jsx)("ul",{children:n.map((function(e){return Object(p.jsxs)("li",{children:[e.name," ",e.number," ",Object(p.jsx)("button",{onClick:function(){return t(e.id)},children:"delete"})]},e.name)}))})},x=function(e){var n=e.notifType,t=e.message;return null===t?null:Object(p.jsx)("div",{className:n,children:t})},v=function(){var e=Object(r.useState)([]),n=Object(d.a)(e,2),t=n[0],a=n[1],c=Object(r.useState)(""),u=Object(d.a)(c,2),b=u[0],f=u[1],l=Object(r.useState)(""),v=Object(d.a)(l,2),w=v[0],g=v[1],y=Object(r.useState)(""),N=Object(d.a)(y,2),k=N[0],C=N[1],S=Object(r.useState)(null),T=Object(d.a)(S,2),A=T[0],P=T[1],D=Object(r.useState)(null),q=Object(d.a)(D,2),E=q[0],I=q[1];Object(r.useEffect)((function(){j.getAll().then((function(e){a(e)}))}),[]);var J=function(){var e=Object(i.a)(s.a.mark((function e(n){var r,c,u;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.find((function(e){return e.id===n})),!window.confirm("Delete ".concat(r.name,"?"))){e.next=10;break}return e.next=5,j.deletePerson(n);case 5:return c=j.getAll(),e.next=8,c;case 8:u=e.sent,a(u);case 10:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),L=t.filter((function(e){return e.name.toLowerCase().includes(k.toLowerCase())}));return Object(p.jsxs)("div",{children:[Object(p.jsx)("h2",{children:"Phonebook"}),Object(p.jsx)(x,{message:A,notifType:"success"}),Object(p.jsx)(x,{message:E,notifType:"error"}),Object(p.jsx)(m,{searchName:k,onSearch:function(e){C(e.target.value)}}),Object(p.jsx)("h3",{children:"Add a new contact"}),Object(p.jsx)(h,{submit:function(e){if(e.preventDefault(),t.map((function(e){return e.name})).includes(b)){var n=t.find((function(e){return e.name===b})),r=Object(o.a)(Object(o.a)({},n),{},{number:w});window.confirm("".concat(b," is already in the phonebook, update number instead?"))&&(j.updateNumber(n.id,r).then((function(e){a(t.map((function(t){return t.id!==n.id?t:e}))),P("".concat(e.name,"'s number was updated")),setTimeout((function(){P(null)}),5e3)})).catch((function(e){I("Information of ".concat(n.name," has already been removed from server")),setTimeout((function(){I(null)}),5e3),a(t.filter((function(e){return e.id!==n.id})))})),f(""),g(""))}else{var c={name:b,number:w};j.addPerson(c).then((function(e){P("Added ".concat(e.name)),a(t.concat(e)),f(""),g(""),setTimeout((function(){P(null)}),5e3)}))}},newName:b,handleNameChange:function(e){f(e.target.value)},newNumber:w,handleNumberChange:function(e){g(e.target.value)}}),Object(p.jsx)("h3",{children:"Numbers"}),Object(p.jsx)(O,{persons:L,onDelete:J})]})};c.a.render(Object(p.jsx)(v,{}),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.02ed9753.chunk.js.map